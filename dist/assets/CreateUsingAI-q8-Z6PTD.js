import{r as q,e as L,u as X,a as Y,j as r}from"./index-h_fRO0Hs.js";import{b as Z}from"./index-Ay2c9EmZ.js";import"./iconBase-CQKhOVdj.js";function $(n,o,i,t){return new(i||(i=Promise))(function(e,c){function l(f){try{p(t.next(f))}catch(s){c(s)}}function u(f){try{p(t.throw(f))}catch(s){c(s)}}function p(f){var s;f.done?e(f.value):(s=f.value,s instanceof i?s:new i(function(y){y(s)})).then(l,u)}p((t=t.apply(n,[])).next())})}function z(n,o){var i,t,e,c,l={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(f){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,t&&(e=2&s[0]?t.return:s[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,s[1])).done)return e;switch(t=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return l.label++,{value:s[1],done:!1};case 5:l.label++,t=s[1],s=[0];continue;case 7:s=l.ops.pop(),l.trys.pop();continue;default:if(e=l.trys,!((e=e.length>0&&e[e.length-1])||s[0]!==6&&s[0]!==2)){l=0;continue}if(s[0]===3&&(!e||s[1]>e[0]&&s[1]<e[3])){l.label=s[1];break}if(s[0]===6&&l.label<e[1]){l.label=e[1],e=s;break}if(e&&l.label<e[2]){l.label=e[2],l.ops.push(s);break}e[2]&&l.ops.pop(),l.trys.pop();continue}s=o.call(n,l)}catch(y){s=[6,y],t=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([p,f])}}}function J(n){var o=typeof Symbol=="function"&&Symbol.iterator,i=o&&n[o],t=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var t,e,c=i.call(n),l=[];try{for(;(o===void 0||o-- >0)&&!(t=c.next()).done;)l.push(t.value)}catch(u){e={error:u}}finally{try{t&&!t.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}return l}function _(n,o,i){if(arguments.length===2)for(var t,e=0,c=o.length;e<c;e++)!t&&e in o||(t||(t=Array.prototype.slice.call(o,0,e)),t[e]=o[e]);return n.concat(t||Array.prototype.slice.call(o))}function K(n,o,i,t,e){for(var c=[],l=5;l<arguments.length;l++)c[l-5]=arguments[l];return $(this,void 0,void 0,function(){var u,p,f,s,y,w;return z(this,function(g){switch(g.label){case 0:g.trys.push([0,12,13,14]),u=J(c),p=u.next(),g.label=1;case 1:if(p.done)return[3,11];switch(f=p.value,typeof f){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,ee(n,o,f,i,t,e)];case 3:return g.sent(),[3,10];case 4:return[4,V(f)];case 5:return g.sent(),[3,10];case 6:return[4,f.apply(void 0,_([n,o,i,t,e],P(c),!1))];case 7:return g.sent(),[3,10];case 8:return[4,f];case 9:g.sent(),g.label=10;case 10:return p=u.next(),[3,1];case 11:return[3,14];case 12:return s=g.sent(),y={error:s},[3,14];case 13:try{p&&!p.done&&(w=u.return)&&w.call(u)}finally{if(y)throw y.error}return[7];case 14:return[2]}})})}function ee(n,o,i,t,e,c){return $(this,void 0,void 0,function(){var l,u;return z(this,function(p){switch(p.label){case 0:return l=n.textContent||"",u=function(f,s){var y=P(s).slice(0);return _(_([],P(f),!1),[NaN],!1).findIndex(function(w,g){return y[g]!==w})}(l,i),[4,te(n,_(_([],P(re(l,o,u)),!1),P(ne(i,o,u)),!1),t,e,c)];case 1:return p.sent(),[2]}})})}function V(n){return $(this,void 0,void 0,function(){return z(this,function(o){switch(o.label){case 0:return[4,new Promise(function(i){return setTimeout(i,n)})];case 1:return o.sent(),[2]}})})}function te(n,o,i,t,e){return $(this,void 0,void 0,function(){var c,l,u,p,f,s,y,w,g,F,a,x,N;return z(this,function(h){switch(h.label){case 0:if(c=o,e){for(l=0,u=1;u<o.length;u++)if(p=P([o[u-1],o[u]],2),f=p[0],(s=p[1]).length>f.length||s===""){l=u;break}c=o.slice(l,o.length)}h.label=1;case 1:h.trys.push([1,6,7,8]),y=J(function(m){var k,b,j,S,I,E,v;return z(this,function(O){switch(O.label){case 0:k=function(R){return z(this,function(M){switch(M.label){case 0:return[4,{op:function(Q){return requestAnimationFrame(function(){return Q.textContent=R})},opCode:function(Q){var B=Q.textContent||"";return R===""||B.length>R.length?"DELETE":"WRITING"}}];case 1:return M.sent(),[2]}})},O.label=1;case 1:O.trys.push([1,6,7,8]),b=J(m),j=b.next(),O.label=2;case 2:return j.done?[3,5]:(S=j.value,[5,k(S)]);case 3:O.sent(),O.label=4;case 4:return j=b.next(),[3,2];case 5:return[3,8];case 6:return I=O.sent(),E={error:I},[3,8];case 7:try{j&&!j.done&&(v=b.return)&&v.call(b)}finally{if(E)throw E.error}return[7];case 8:return[2]}})}(c)),w=y.next(),h.label=2;case 2:return w.done?[3,5]:(g=w.value,F=g.opCode(n)==="WRITING"?i+i*(Math.random()-.5):t+t*(Math.random()-.5),g.op(n),[4,V(F)]);case 3:h.sent(),h.label=4;case 4:return w=y.next(),[3,2];case 5:return[3,8];case 6:return a=h.sent(),x={error:a},[3,8];case 7:try{w&&!w.done&&(N=y.return)&&N.call(y)}finally{if(x)throw x.error}return[7];case 8:return[2]}})})}function ne(n,o,i){var t,e;return i===void 0&&(i=0),z(this,function(c){switch(c.label){case 0:t=o(n),e=t.length,c.label=1;case 1:return i<e?[4,t.slice(0,++i).join("")]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2]}})}function re(n,o,i){var t,e;return i===void 0&&(i=0),z(this,function(c){switch(c.label){case 0:t=o(n),e=t.length,c.label=1;case 1:return e>i?[4,t.slice(0,--e).join("")]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2]}})}var se="index-module_type__E-SaG";(function(n,o){o===void 0&&(o={});var i=o.insertAt;if(typeof document<"u"){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",i==="top"&&t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var ie=q.memo(q.forwardRef(function(n,o){var i=n.sequence,t=n.repeat,e=n.className,c=n.speed,l=c===void 0?40:c,u=n.deletionSpeed,p=n.omitDeletionAnimation,f=p!==void 0&&p,s=n.preRenderFirstString,y=s!==void 0&&s,w=n.wrapper,g=w===void 0?"span":w,F=n.splitter,a=F===void 0?function(d){return _([],P(d),!1)}:F,x=n.cursor,N=x===void 0||x,h=n.style,m=function(d,T){var A={};for(var C in d)Object.prototype.hasOwnProperty.call(d,C)&&T.indexOf(C)<0&&(A[C]=d[C]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(C=Object.getOwnPropertySymbols(d);G<C.length;G++)T.indexOf(C[G])<0&&Object.prototype.propertyIsEnumerable.call(d,C[G])&&(A[C[G]]=d[C[G]])}return A}(n,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),k=m["aria-label"],b=m["aria-hidden"],j=m.role;u||(u=l);var S=new Array(2).fill(40);[l,u].forEach(function(d,T){switch(typeof d){case"number":S[T]=Math.abs(d-100);break;case"object":var A=d.type,C=d.value;if(typeof C!="number")break;A==="keyStrokeDelayInMs"&&(S[T]=C)}});var I,E,v,O,R,M,Q=S[0],B=S[1],D=function(d,T){T===void 0&&(T=null);var A=q.useRef(T);return q.useEffect(function(){d&&(typeof d=="function"?d(A.current):d.current=A.current)},[d]),A}(o),U=se;I=e?"".concat(N?U+" ":"").concat(e):N?U:"",E=q.useRef(function(){var d,T=i;t===1/0?d=K:typeof t=="number"&&(T=Array(1+t).fill(i).flat());var A=d?_(_([],P(T),!1),[d],!1):_([],P(T),!1);return K.apply(void 0,_([D.current,a,Q,B,f],P(A),!1)),function(){D.current}}),v=q.useRef(),O=q.useRef(!1),R=q.useRef(!1),M=P(q.useState(0),2)[1],O.current&&(R.current=!0),q.useEffect(function(){return O.current||(v.current=E.current(),O.current=!0),M(function(d){return d+1}),function(){R.current&&v.current&&v.current()}},[]);var H=g,W=y?i.find(function(d){return typeof d=="string"})||"":null;return L.createElement(H,{"aria-hidden":b,"aria-label":k,role:j,style:h,className:I,children:k?L.createElement("span",{"aria-hidden":"true",ref:D,children:W}):W,ref:k?void 0:D})}),function(n,o){return!0});window.questionMap=new Map;const ce=()=>{const[n,o]=q.useState(""),[i,t]=q.useState([]),[e,c]=q.useState(!1),[l,u]=q.useState(!1),p=q.useRef(null),{userId:f}=X(),s=Y(),y=async a=>{u(!0),console.log("Creating presentation with items:",a);try{const x=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/createPresentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:f,title:"Untitled Presentation"})}),N=await x.json();if(!x.ok)throw console.log("Failed to create presentation:",N),new Error(N.message||"Failed to create presentation");const h=N.presentationId;for(const m of a){const{designType:k,designTemplate:b,options:j,question:S,description:I}=m,E=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/addQuestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:f,presentationId:h,designType:k,designTemplate:b,options:j,question:S,description:I})}),v=await E.json();if(!E.ok)throw console.log("Failed to add question:",v),new Error(v.message||"Failed to add question");s(`/App/AdminPanel/Presentation/${h}`)}}catch(x){console.log("Error creating presentation:",x)}};q.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[i]);const w=async a=>{t(x=>[...x,{role:"user",text:a}]),o(""),c(!0),t(x=>[...x,{role:"bot",type:"loading"}]);try{let h=(await(await fetch("https://quizidy-backend.duckdns.org/AIFeatures/sendMessageToAI",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})})).json()).reply;typeof h=="string"&&h.includes("```")&&(h=h.replace(/```json|```/g,"").trim());let m;try{m=JSON.parse(h)}catch(k){console.error("JSON parse failed:",k),m={status:"ERROR",reply:"⚠️Something went wrong!"}}t(k=>{const b=[...k];if(b.pop(),Array.isArray(m)){const j=`G${Date.now()}`;return m.forEach((S,I)=>{const E=S.id||`Q${j}_${I}`;window.questionMap.set(E,S)}),[...b,{role:"bot",type:"question-group",groupId:j,questions:m}]}switch(m.status){case"QUESTION":{const j=m.id||`Q${Date.now()}`;return window.questionMap.set(j,m),[...b,{role:"bot",type:"question-group",groupId:j,questions:[m]}]}case"OK":return[...b,{role:"bot",type:"text",text:m.reply}];case"ERROR":return[...b,{role:"bot",type:"error",text:m.reply}];default:return[...b,{role:"bot",type:"text",text:"⚠️ Unexpected response format. Please try again."}]}})}catch(x){console.error("Error communicating with AI:",x),t(N=>{const h=[...N];return h.pop(),[...h,{role:"bot",type:"error",text:"⚠️ Network error. Please try again later."}]})}finally{c(!1)}},g=a=>!a&&a!==""?{text:"",color:"#000000",votes:0,answer:!1}:typeof a=="string"?{text:a,color:"#000000",votes:0,answer:!1}:{text:a.text??"",color:a.color??"#000000",votes:a.votes??0,answer:!!a.answer},F=(a,x)=>{const N=a.designType??"Quiz",h=a.id||`Q${Date.now()}_${x}`,m=a.designTemplate??"bg-BG-1",k=a.question??"Untitled question",b=a.description??"",S=(a.options??[]).map(g),I=S.find(v=>v.answer),E=typeof a.correctOption=="string"&&a.correctOption||I&&I.text||null;return l?r.jsx("div",{className:"h-screen w-screen bg-white top-0 left-0 flex justify-center items-center absolute z-10",children:r.jsxs("div",{className:"flex flex-col justify-center items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-white border-b-indigo-400 rounded-full animate-spin"}),r.jsx("div",{className:"font-Outfit ",children:"Building up the Presentation!"})]})}):r.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl p-4 shadow-sm text-gray-800 mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs font-semibold text-indigo-600 uppercase",children:N}),r.jsx("div",{className:"text-xs text-gray-400",children:m})]}),r.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:k}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:S.map((v,O)=>{const R=E&&v.text===E||v.answer===!0;return r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${R?"border-green-400 bg-green-50":"border-gray-200 bg-white"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:v.color||"#000000"}}),r.jsxs("div",{className:"text-sm font-medium",children:[r.jsxs("span",{className:"mr-2 font-semibold",children:[String.fromCharCode(65+O),"."]}),r.jsx("span",{children:v.text})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:[v.votes??0," votes"]}),R&&r.jsx("div",{className:"text-xs text-green-700 font-semibold",children:"✔ Correct"})]})]},O)})}),b&&r.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:[r.jsx("strong",{children:"Explanation:"})," ",b]})]},h)};return r.jsxs("main",{className:"w-full h-screen flex pt-2 font-[Outfit] bg-white",children:[r.jsx("div",{className:"w-full flex flex-col gap-6",children:r.jsxs("div",{className:"flex flex-col flex-1 pr-10 w-full rounded-3xl mx-8 shadow-inner text-gray-800 overflow-y-auto",children:[r.jsxs("div",{className:"flex-1 w-full max-w-3xl mx-auto px-6 py-8",children:[i.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[r.jsx("h1",{className:"text-5xl font-semibold bg-gradient-to-r from-indigo-400 to-indigo-700 bg-clip-text text-transparent mb-2",children:"AI ASSISTANT"}),r.jsxs("p",{className:"text-gray-600 text-sm",children:["Write a prompt and generate as many questions as you want!",r.jsx("br",{}),"Eg :"," ",r.jsx(ie,{sequence:["Generate a easy level quiz question on topic animals.",1e3,"Generate 5 medium level quiz question on topic Artificial Intelligence.",1e3,"Generate 10 hard level quiz question on logical reasoning.",1e3,"Generate 10 questions : 5 quiz on topic DSA, 3 poll question and 2 ranking questions.",1e3],wrapper:"span",speed:60,repeat:1/0})]})]}):i.map((a,x)=>a.type==="question-group"?r.jsxs("div",{className:"my-3",children:[a.questions.map((N,h)=>F(N,h)),r.jsx("div",{className:"pt-2 relative flex justify-center",children:r.jsx("button",{onClick:()=>y(a.questions),className:"bg-indigo-400 cursor-pointer text-white pt-1 pb-1 pr-4 pl-4 rounded-2xl",children:"Create Presentation"})})]},a.groupId):r.jsx("div",{className:`my-3 flex ${a.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`p-3 rounded-2xl max-w-[80%] text-sm shadow-sm ${a.role==="user"?"bg-gradient-to-r from-indigo-400 to-indigo-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-800 rounded-bl-none"}`,children:a.type==="loading"?r.jsxs("div",{className:"flex space-x-1 items-center",children:[r.jsx("span",{className:"dot"}),r.jsx("span",{className:"dot"}),r.jsx("span",{className:"dot"})]}):r.jsx("div",{className:"whitespace-pre-line",children:a.text})})},x)),r.jsx("div",{ref:p})]}),r.jsxs("div",{className:"w-full max-w-3xl mx-auto px-6 mt-auto",children:[r.jsxs("div",{className:"flex items-center w-full bg-white border border-indigo-200 rounded-2xl px-5 py-3 shadow-md focus-within:ring-2 focus-within:ring-indigo-300 transition",children:[r.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none text-gray-700 placeholder-gray-400 text-sm",placeholder:"Write your prompt here...",value:n,onChange:a=>o(a.target.value),onKeyDown:a=>{a.key==="Enter"&&n.trim()&&w(n)}}),r.jsx("button",{onClick:()=>n.trim()&&w(n),type:"button",className:"text-indigo-400 cursor-pointer hover:text-indigo-700 transition",disabled:e,children:r.jsx(Z,{className:"text-xl"})})]}),r.jsx("div",{className:"pt-3 pb-2 w-full flex justify-center flex-col items-center gap-2",children:r.jsx("p",{className:"flex text-center text-xs text-stone-700 font-Outfit",children:"This is a customized chatbot that generates multiple choice questions based on you prompts. Limit is 10 questions per request"})})]})]})}),r.jsx("style",{children:`
        .dot {
          width: 6px;
          height: 6px;
          background-color: #6366f1;
          border-radius: 50%;
          display: inline-block;
          animation: blink 1.4s infinite both;
        }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes blink {
          0%,80%,100% { opacity: 0; }
          40% { opacity: 1; }
        }
      `})]})};export{ce as default};
