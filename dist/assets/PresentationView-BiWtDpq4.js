import{a as Q,j as e,r as t,b as Me,u as Re,N as Fe}from"./index-h_fRO0Hs.js";import{U as Qe,C as de,I as De,B as _e}from"./index-HZGzUvlj.js";import{c as Ie,d as Je,a as _,b as He}from"./index-DB1yuH0Y.js";import{C as Ve}from"./circle-plus-DWAKO-OX.js";import{c as I}from"./createLucideIcon-BdoxpPWD.js";import{R as Ue,L as We,a as Ye,G as ae}from"./index-6TfauK6T.js";import{c as ue,d as xe,b as me,e as Ze}from"./index-BbFnceN2.js";import{t as Xe,C as re}from"./Templates-Dmdp2f_a.js";import{I as fe}from"./index-BUsAA71c.js";import{S as pe,C as he,a as ge}from"./index-CDY7aV1E.js";import{b as Ke,a as et}from"./index-Bj7ceLlk.js";import{X as tt}from"./x-ChJIMCMG.js";import{S as je}from"./Slogan-BFXXZTf2.js";import{G as st}from"./iconBase-CQKhOVdj.js";import{H as nt,a as lt}from"./index-D8EhoW0z.js";import{l as it}from"./LOGO-AyNIh5tx.js";import{B as at}from"./ReportBug-BwuiD2ov.js";import{F as rt}from"./index-Ay2c9EmZ.js";import{U as ot}from"./user-BLS5Bije.js";import{E as ct}from"./eye-CM7ZealU.js";const dt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oe=I("arrow-right",dt);const ut=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ce=I("crown",ut);const xt=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],mt=I("radio",xt);const ft=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pt=I("sparkles",ft),ht=({onClose:s,isVisible:n,presentationId:d})=>{const l=Q(),o=()=>{l(`/AdminControlled/Quiz/Live/${d}`)},r=()=>{l(`/UserControlled/Quiz/Live/${d}`)};return e.jsxs("div",{className:`fixed inset-0 flex items-center justify-center transition-all duration-500 ease-out ${n?"opacity-100 ":"opacity-0 pointer-events-none"} bg-black/60`,children:[e.jsxs("div",{className:"relative bg-white/90 rounded-3xl pt-4 pr-8 pl-8 pb-8 w-[95vw] max-w-xl shadow-2xl border-2 border-indigo-200 backdrop-blur-md animate-fadeIn max-h-[630px] overflow-auto ",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(Ve,{onClick:s,className:"rotate-45 cursor-pointer text-red-500 hover:bg-red-100 rounded-full transition p-1",size:32})}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsxs("span",{className:"flex items-center justify-center mb-2",children:[e.jsx(Ie,{className:"text-indigo-400 text-3xl animate-bounce mr-2"}),e.jsx(pt,{className:"text-pink-400",size:28})]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold font-Outfit text-center bg-gradient-to-r from-indigo-400 via-pink-400 to-purple-700 text-transparent bg-clip-text drop-shadow-lg tracking-tight",children:"Go Live!"}),e.jsx("p",{className:"text-center text-gray-500 mt-2 text-base font-Outfit",children:"Choose how you want to run your quiz session"})]}),e.jsxs("div",{className:"space-y-7 font-Outfit",children:[e.jsxs("div",{onClick:o,className:"group p-6 border-2 border-indigo-200 flex justify-center items-center flex-col rounded-2xl cursor-pointer hover:shadow-2xl hover:scale-[1.03] transition bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 relative overflow-hidden",children:[e.jsx("span",{className:"absolute -top-6 -right-6 opacity-20 text-indigo-300 text-8xl pointer-events-none select-none",children:e.jsx(ce,{size:80})}),e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-indigo-700 mb-1",children:[e.jsx(ce,{className:"text-yellow-400",size:24})," Admin Controlled Quiz"]}),e.jsx("p",{className:"w-[90%] flex justify-center items-center text-center text-gray-600 text-sm",children:"A quiz fully controlled by the Admin. Admin switches questions & controls flow."}),e.jsxs("span",{className:"mt-3 flex items-center gap-1 text-xs text-indigo-500 font-semibold group-hover:underline",children:["Go as Admin ",e.jsx(oe,{size:16})]})]}),e.jsxs("div",{className:"flex items-center gap-2 my-4",children:[e.jsx("div",{className:"flex-grow h-[1px] bg-gradient-to-r from-indigo-200 via-pink-200 to-purple-200"}),e.jsx("span",{className:"text-gray-500 text-sm px-2 py-1 bg-gray-100 rounded-full shadow-sm font-Outfit",children:"or"}),e.jsx("div",{className:"flex-grow h-[1px] bg-gradient-to-r from-indigo-200 via-pink-200 to-purple-200"})]}),e.jsxs("div",{onClick:r,className:"group p-6 flex flex-col justify-center items-center border-2 border-green-200 rounded-2xl cursor-pointer opacity-70 bg-gradient-to-r from-blue-100 via-green-100 to-teal-100 relative overflow-hidden  hover:shadow-2xl hover:scale-[1.03] transition-all ease-in-out duration-75",children:[e.jsx("span",{className:"absolute -top-6 -left-6 opacity-20 text-green-300 text-8xl pointer-events-none select-none",children:e.jsx(Qe,{size:80})}),e.jsxs("h3",{className:"font-bold text-lg w-full justify-center flex items-center gap-2 text-green-700 mb-1",children:[e.jsx(Je,{className:"text-green-400",size:22})," User Controlled Quiz"]}),e.jsx("p",{className:"text-gray-600 w-[90%] flex text-center justify-center text-sm",children:"Users can answer freely at their own pace. Admin sees live results only."}),e.jsxs("span",{className:"mt-3 flex items-center gap-1 text-xs text-green-500 font-semibold group-hover:underline",children:["Go as Viewer ",e.jsx(oe,{size:16})]})]})]})]}),e.jsx("style",{children:`
                @keyframes fadeIn {
                  0% { opacity: 0; transform: scale(0.95); }
                  100% { opacity: 1; transform: scale(1); }
                }
                .animate-fadeIn {
                  animation: fadeIn 0.7s cubic-bezier(0.4,0,0.2,1);
                }
            `})]})},gt=({localQuestion:s,localOptions:n,handleColorChange:d,handleOptionChange:l,updateQuestion:o,deleteOption:r,addOption:m,designType:i,questionId:v,previewUrl:f,setPreviewUrl:w,Description:C,setDescription:y,setStatus:N,setShowPopUp:b,setDetails:g,setLocalOptions:O})=>{const[S,T]=t.useState(null),[G,z]=t.useState(null),B=t.useRef(null),A=x=>{const c=x.target.files[0];if(z(c||null),T(c?c.name:null),c){const p=new FileReader;p.onloadend=()=>{w(p.result)},p.readAsDataURL(c)}},E=()=>{B.current&&B.current.click()},q=async()=>{if(!G){N(!1),g("Please select a file first!"),b(!0),setTimeout(()=>b(!1),3e3);return}const x=new FormData;x.append("image",G),x.append("questionId",v);try{const c=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/uploadImage",{method:"POST",body:x}),p=await c.json();console.log(p),c.ok?(N(!0),g("Image Uploaded Successfully!"),b(!0),w(p.question.Image),T(null),setTimeout(()=>b(!1),3e3)):(N(!1),g(p.Message),b(!0),setTimeout(()=>b(!1),3e3))}catch(c){console.log(c),N(!0),g("Unexpected error occured! Please try again later"),b(!0),setTimeout(()=>b(!1),3e3)}},L=t.useRef(null);t.useEffect(()=>{L.current=C},[C]);const M=t.useRef(null),j=x=>{const c=x.target.value;y(c),M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{console.log("send");const p=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/question/description",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({questionId:v,description:L.current})}),R=await p.json();console.log(R),p.ok&&(N(!0),g("Description Updated Successfully"),b(!0),setTimeout(()=>{b(!1)},2e3))},2e3)},F=async()=>{const x=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/deleteImage",{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify({questionId:v})}),c=await x.json();console.log(c),x.ok&&(w(null),N(!0),g("Image Deleted Successfully"),b(!0),setTimeout(()=>{b(!1)},2e3))},k=async x=>{const c=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/question/correctOption",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:v,optionId:x})}),p=await c.json();console.log(p),c.ok?(O(p.question.options),N(!0),g("Successfully marked as corrected"),b(!0),setTimeout(()=>{b(!1)},2e3)):(N(!1),g(p.message),b(!0),setTimeout(()=>{b(!1)},2e3))};return e.jsx("section",{className:`\r
    w-full md:bg-transparent\r
    fixed md:static\r
    left-1/2 md:left-0\r
    top-5 md:top-0\r
    transform md:transform-none\r
    -translate-x-1/2 md:translate-x-0\r
    z-50 md:z-auto\r
    flex justify-center\r
    md:w-[24%]\r
    md:h-auto\r
  `,children:e.jsxs("div",{className:`\r
      w-[90%] sm:w-[85%] md:w-full\r
      max-w-md md:max-w-none\r
      h-[85vh] md:h-[96%] md:mt-6\r
      bg-white/95 md:bg-white\r
      backdrop-blur-sm\r
      border border-stone-300\r
      shadow-lg md:shadow-none\r
      rounded-2xl\r
      flex flex-col\r
      gap-6\r
      overflow-y-auto\r
      p-4 md:p-0\r
    `,children:[e.jsx("div",{className:"flex pt-3 pl-2 pr-3 justify-between items-center sticky top-0 bg-white z-10 border-b border-stone-200",children:e.jsxs("h1",{className:"flex gap-2 items-center text-lg md:text-xl font-semibold font-Outfit text-indigo-400",children:[e.jsx(ue,{})," Editing Section"]})}),e.jsxs("div",{className:"px-2 md:px-4 pb-6",children:[e.jsx("h2",{className:"font-Outfit font-semibold text-stone-600 mb-1 text-sm md:text-base",children:"Edit Question:"}),e.jsx("input",{onChange:x=>o(x.target.value),type:"text",value:s,className:"h-9 w-full border border-stone-300 bg-stone-100 focus:bg-white focus:border-indigo-400 font-Outfit pl-2 text-sm rounded-lg transition-all duration-200",placeholder:"Enter your question"}),e.jsx("div",{className:"h-px w-full bg-stone-200 my-4"}),e.jsx("h3",{className:"text-sm font-Outfit font-semibold mb-2 text-stone-600",children:"Edit Options:"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[n.map((x,c)=>e.jsxs("div",{className:"relative flex items-center gap-2",children:[i==="quiz"&&e.jsx("input",{type:"radio",className:"absolute top-2 right-8 w-4 h-4 accent-indigo-400 cursor-pointer",onClick:()=>k(x._id),checked:x.answer}),e.jsx("input",{value:x.text,onChange:p=>l(c,p.target.value),type:"text",placeholder:`Option ${c+1}`,className:"h-8 w-[70%] border border-stone-300 bg-stone-100 focus:bg-white focus:border-indigo-400 font-Outfit pl-8 text-sm rounded-lg transition-all"}),e.jsx("label",{className:"absolute top-[6px] left-[6px] h-5 w-5 rounded-full border border-gray-300 cursor-pointer",style:{backgroundColor:x.color},children:e.jsx("input",{type:"color",value:x.color,onChange:p=>d(c,p.target.value),className:"opacity-0 absolute w-full h-full cursor-pointer"})}),e.jsx("div",{onClick:()=>r(x._id),className:"p-[6px] bg-stone-300 hover:bg-red-500 rounded-2xl cursor-pointer text-white transition-all",children:e.jsx(Ue,{size:14})})]},x._id)),e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("button",{onClick:m,className:"px-5 py-2 bg-indigo-400 hover:bg-indigo-500 text-white rounded-2xl font-Outfit text-sm transition-all",children:"Add an Option"})})]}),e.jsx("div",{className:"h-px w-full bg-stone-200 my-4"}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"font-Outfit font-semibold text-stone-600 mb-1",children:"Ask question By Image :"}),e.jsx("p",{className:"font-Outfit text-sm text-black pt-2",children:"You can provide an image also (optional):"}),e.jsx("p",{className:"font-Outfit text-xs text-stone-600 pb-2",children:"Max Size: 10MB (JPG/PNG/JPEG)"}),f?e.jsxs("div",{className:"w-full h-56 rounded-xl overflow-hidden border border-indigo-400 flex items-center justify-center relative",children:[e.jsx("img",{src:f,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{onClick:F,className:"absolute bottom-2 right-[90px] font-Outfit cursor-pointer bg-red-500 text-white px-3 py-1 rounded-xl text-xs sm:text-sm",children:"Delete"}),e.jsx("button",{onClick:E,className:"absolute bottom-2 right-2 font-Outfit cursor-pointer bg-indigo-400 text-white px-3 py-1 rounded-xl text-xs sm:text-sm",children:"Change"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:B,onChange:A})]}):e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-indigo-400 bg-indigo-400 text-white rounded-xl cursor-pointer transition hover:bg-indigo-500",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-8 h-8 mb-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.2 5.02A4 4 0 0 0 5 13h2.2M10 15V6m0 0L8 8m2-2 2 2"})}),e.jsxs("p",{className:"text-sm font-Outfit",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs font-Outfit",children:"JPG, PNG, JPEG supported"})]}),e.jsx("input",{id:"dropzone-file",type:"file",accept:"image/*",className:"hidden",onChange:A})]}),e.jsx("p",{className:"text-xs font-Outfit text-stone-600 mt-2",children:S?`Selected File: ${S}`:"No file selected"}),e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("button",{onClick:q,className:"mt-3 px-5 py-2 cursor-pointer bg-indigo-400 hover:bg-indigo-500 text-white rounded-xl font-Outfit text-sm transition-all",children:"Upload Image"})})]}),i==="quiz"&&e.jsxs("div",{className:"w-full flex flex-col pt-3",children:[e.jsx("div",{className:"h-px w-full bg-stone-200 my-4"}),e.jsx("h2",{className:"font-Outfit font-semibold text-stone-600 mb-1",children:"Add Reasoning:"}),e.jsx("h4",{className:"font-Outfit text-sm text-stone-600 mb-1 mt-2",children:"Explain why an option is correct or incorrect."}),e.jsx("input",{onChange:x=>j(x),type:"text",value:C,className:"h-8 w-full border border-stone-300 bg-stone-100 focus:bg-white focus:border-indigo-400 font-Outfit pl-2 text-sm rounded-lg transition-all",placeholder:"Enter your reasoning"})]})]})]})})},jt=({designTemplate:s,changeDesignTemplate:n,deletePopUp:d,presentationName:l,updatePresentationName:o})=>{const[r,m]=t.useState(l||"");return t.useEffect(()=>{m(l||"")},[l]),e.jsx("section",{className:"w-[90%] md:w-[10%] lg:w-[24%] h-full absolute md:static flex justify-center ",children:e.jsx("div",{className:"w-full h-auto flex justify-center gap-2",children:e.jsxs("div",{className:"bg-white  pb-10 overflow-auto mt-6 border border-white rounded-2xl w-full flex flex-col gap-6",children:[e.jsx("div",{className:"h-auto flex justify-center w-full items-center",children:e.jsx("div",{className:"flex pt-5 pl-2 pr-4 justify-between w-full items-center ",children:e.jsxs("h1",{className:"flex gap-2 pl-2 justify-center text-xl font-semibold items-center text-indigo-400 font-Outfit",children:[e.jsx(ue,{}),"Edit Slide  "]})})}),e.jsxs("div",{className:"w-full flex flex-col pl-6 ",children:[e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("h1",{className:"w-full font-Outfit text-gray-500 font-semibold flex gap-2 justify-start items-center",children:"Edit Presentation Name :"})}),e.jsx("div",{children:e.jsx("input",{value:r,type:"text",onChange:i=>o(i.target.value),className:"h-8 w-[95%] mt-1 mb-3 border border-stone-300 bg-stone-200 focus:bg-white focus:border-indigo-400 font-Outfit pl-2 text-sm rounded-lg"})})]}),e.jsxs("div",{className:"w-full flex flex-col pl-6",children:[e.jsx("p",{className:" font-Outfit text-gray-500 font-semibold",children:"Change Template : "}),e.jsx("div",{className:"w-[90%]  h-1 border-b-2 mb-2 border-stone-300"}),e.jsx("div",{className:"w-full  pr-2",children:e.jsx("div",{className:"grid grid-cols-2 gap-3 place-content-center",children:Xe.map(i=>e.jsx("div",{onClick:()=>n(i.className),className:`w-full h-20 bg-cover border-2 rounded-xl bg-center cursor-pointer ${s==i.className?"border-indigo-400":"border-white"} ${i.className}`},i.id))})})]}),e.jsx("div",{className:"w-full flex justify-center items-center pt-3",children:e.jsx("button",{onClick:d,className:"font-Outfit p-3 bg-red-500 rounded-2xl cursor-pointer text-white",children:"Delete this Slide!"})})]})})})},bt=({AddAdminFun:s,listOfAdmin:n,deleteAddedAdmin:d})=>{const[l,o]=t.useState(""),[r,m]=t.useState(!1),i=r&&l.trim().endsWith("@gmail.com"),v=()=>{i&&(s(l),o(""),m(!1))};return e.jsx("div",{className:"w-[100%] lg:w-[24%] h-full absolute md:static flex justify-center items-center",children:e.jsx("div",{className:"w-[90%] flex justify-center rounded-2xl h-full items-center",children:e.jsxs("div",{className:"bg-white h-[97%] mr-3 pb-10 overflow-auto mt-6 border border-stone-300 rounded-2xl w-full flex flex-col",children:[e.jsx("div",{children:e.jsxs("h1",{className:"flex font-Outfit pt-3 pl-2 font-semibold items-center text-indigo-400 text-2xl gap-2",children:[e.jsx(xe,{})," Admin Panel:"]})}),e.jsx("div",{className:"font-Outfit min-h-[280px] w-full pt-4 pl-4",children:e.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[e.jsx("h1",{className:"font-semibold text-indigo-400",children:"Admins Other than you:"}),e.jsx("div",{className:"w-full h-[90%] overflow-auto flex flex-col gap-3",children:n&&n.length>0?n.map((f,w)=>e.jsxs("div",{className:"flex justify-between items-center bg-stone-50 p-3 rounded-lg shadow-sm border border-stone-300",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-Outfit text-sm text-stone-600",children:f.userName}),e.jsx("p",{className:"font-Outfit text-xs text-stone-400",children:f.userGmail})]}),e.jsx(fe,{size:18,className:"cursor-pointer text-red-400 hover:text-red-600",onClick:()=>d(f.userId,f._userName)})]},w)):e.jsx("p",{className:"text-stone-500 text-sm",children:"No admins found."})})]})}),e.jsx("div",{className:"w-[90%] border-t-2 border-stone-300 mt-4 mb-2 h-1 ml-4"}),e.jsxs("div",{className:"w-full pl-4",children:[e.jsx("h1",{className:"font-semibold font-Outfit text-indigo-400",children:"Add Admin:"}),e.jsxs("div",{className:"pt-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col font-Outfit",children:[e.jsx("label",{htmlFor:"email",className:"text-sm pl-1 text-stone-600",children:"Email of Admin:"}),e.jsx("input",{value:l,onChange:f=>o(f.target.value),type:"email",name:"email",id:"email",placeholder:"admin@gmail.com",className:"h-8 w-[90%] pl-2 rounded-2xl bg-stone-200"})]}),e.jsxs("div",{className:"pt-2 pl-2 flex gap-1 items-center",children:[e.jsx("input",{type:"checkbox",onChange:()=>m(!r),checked:r,id:"permission",className:"border mt-1 accent-indigo-400 cursor-pointer hover:accent-indigo-600 rounded-2xl h-4 w-4"}),e.jsx("label",{htmlFor:"permission",className:"cursor-pointer font-Outfit text-sm text-stone-600",children:"I accept to create this person the admin of this presentation!"})]}),e.jsx("p",{className:"text-sm font-Outfit text-stone-500 mt-2",children:"After creating someone admin, they can directly access and manipulate this presentation. The given email must be registered with us."}),e.jsx("div",{className:"w-full flex justify-center items-center mt-2",children:e.jsx("button",{onClick:v,disabled:!i,className:`pt-1 pb-1 pl-5 pr-5 font-Outfit rounded-2xl text-white flex justify-center items-center transition-all duration-200 ${i?"bg-indigo-400 hover:bg-indigo-500 cursor-pointer":"bg-gray-400 cursor-not-allowed"}`,children:"Submit"})})]})]})]})})})},Nt=({onClose:s,isVisible:n,presentationId:d})=>{const[l,o]=t.useState(!1),[r,m]=t.useState(!1),[i,v]=t.useState(null),[f,w]=t.useState(null),C=Q(),y=async()=>{if(i&&f){const g="Question will be displayed here!",O=[{text:"Option A",color:"#FF0000"},{text:"Option B",color:"#00FF00",answer:!0},{text:"Option C",color:"#0000FF"},{text:"Option D",color:"#FFA500"}];try{const S=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/addQuestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:g,options:O,designTemplate:f,presentationId:d,designType:i})}),T=await S.json();S.ok&&(s(),C(`/App/AdminPanel/Presentation/${d}/${T.id}`)),console.log(d)}catch(S){console.log("error",S)}}},N=[{id:"quiz",icon:e.jsx(pe,{className:"text-orange-400"}),label:"Quiz"},{id:"poll",icon:e.jsx(me,{className:"text-blue-400",size:16}),label:"Poll"},{id:"ranking",icon:e.jsx(he,{color:"indigo",size:14}),label:"Ranking"},{id:"pie",icon:e.jsx(ge,{color:"blue",size:14}),label:"Pie"},{id:"donut",icon:e.jsx(Ke,{className:"text-emerald-400",size:16}),label:"Donut"}],b=[{id:"BG-1",className:"bg-BG-1"},{id:"BG-2",className:"bg-BG-2"},{id:"BG-3",className:"bg-BG-3"},{id:"BG-4",className:"bg-BG-4"},{id:"BG-5",className:"bg-BG-5"},{id:"BG-6",className:"bg-BG-6"},{id:"BG-7",className:"bg-BG-7"},{id:"BG-8",className:"bg-BG-8"},{id:"BG-9",className:"bg-BG-9"},{id:"BG-10",className:"bg-BG-10"},{id:"BG-11",className:"bg-BG-11"},{id:"BG-12",className:"bg-BG-12"},{id:"BG-13",className:"bg-BG-13"},{id:"BG-14",className:"bg-BG-14"},{id:"BG-15",className:"bg-BG-15"},{id:"BG-16",className:"bg-BG-16"}];return e.jsxs("section",{className:`flex transition-all duration-500 ease-out  h-auto w-92 relative  flex-col ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4  pointer-events-none"}`,children:[e.jsx("div",{className:" -top-4 left-10 absolute",children:e.jsx(_,{className:"text-2xl text-white"})}),e.jsxs("div",{className:"flex w-full pl-4 pb-5 rounded-xl bg-white flex-col",children:[e.jsx("div",{className:"w-full pt-3",children:e.jsx("div",{className:"w-full flex justify-end pr-3",children:e.jsx(tt,{size:16,onClick:s,className:"hover:text-gray-400 cursor-pointer"})})}),e.jsxs("div",{className:"h-[450px] overflow-auto",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("p",{className:"font-Outfit text-xs text-gray-600",children:"Interactive questions"}),e.jsx(re,{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),size:15,className:"text-gray-600 cursor-pointer"})]}),e.jsx("div",{className:`absolute flex-col left-0 z-50 gap-0 transition-all duration-500 ease-out ${l?"opacity-100 translate-y-0 flex":"opacity-0 translate-y-4 pointer-events-none"}`,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute pl-32",children:e.jsx(_,{className:"text-2xl  text-black"})}),e.jsx("div",{className:"absolute top-4 h-8 w-96 flex justify-center items-center rounded-2xl text-white bg-black font-Outfit",children:e.jsx("p",{className:"text-xs",children:"Get real-time input from your audience with these question formats."})})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:N.map(g=>e.jsxs("div",{onClick:()=>v(g.id),className:`flex h-7 hover:bg-gray-200 gap-1 border-2 p-3 cursor-pointer items-center rounded-2xl 
                  ${i===g.id?"border-indigo-400":"border-transparent"}`,children:[g.icon,e.jsx("p",{className:"font-Outfit text-xs",children:g.label})]},g.id))}),e.jsxs("div",{className:"mt-4 flex gap-2 items-center",children:[e.jsx("p",{className:"font-Outfit text-xs  text-gray-600",children:"Templates"}),e.jsx(re,{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),size:15,className:"text-gray-600 cursor-pointer"})]}),e.jsx("div",{className:`absolute flex-col left-0 z-50 gap-0 transition-all duration-500 ease-out ${r?"opacity-100 translate-y-0 flex":"opacity-0 translate-y-4 pointer-events-none"}`,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute pl-[75px]",children:e.jsx(_,{className:"text-2xl  text-black"})}),e.jsx("div",{className:"absolute top-4 h-8 w-80 flex justify-center items-center rounded-2xl text-white bg-black font-Outfit",children:e.jsx("p",{className:"text-xs",children:"Choose a template and make the slide more Interactive"})})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4 pr-4",children:b.map(g=>e.jsx("div",{onClick:()=>w(g.className),className:` ${g.className} border-2 ${f===g.className?"border-indigo-400":"border-white"} w-full h-20 bg-center bg-cover cursor-pointer`},g.id))}),e.jsx("div",{className:"w-full mt-3 flex justify-center items-center",children:e.jsx("button",{onClick:y,disabled:!i||!f,className:`${i&&f?"bg-indigo-400 cursor-pointer":"bg-gray-300 cursor-not-allowed"} text-sm font-Outfit pt-1 pb-1 pl-5 pr-5 text-white rounded-2xl`,children:"Create"})})]})]})]})};function vt(s){return st({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 2H8C4.691 2 2 4.691 2 8v13a1 1 0 0 0 1 1h13c3.309 0 6-2.691 6-6V8c0-3.309-2.691-6-6-6zM8.999 17H7v-1.999l5.53-5.522 1.999 1.999L8.999 17zm6.473-6.465-1.999-1.999 1.524-1.523 1.999 1.999-1.524 1.523z"},child:[]}]})(s)}const D=({isVisible:s,value:n})=>e.jsxs("div",{className:`absolute flex-col left-0 z-50 gap-0 transition-all duration-500 ease-out ${s?"opacity-100 translate-y-0 flex":"opacity-0 translate-y-4 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute top-[-40px] left-1/2 transform -translate-x-1/2 px-3 py-1 flex justify-center items-center rounded-2xl text-white bg-black font-Outfit font-semibold whitespace-nowrap z-10",children:e.jsx("p",{className:"text-base",children:n})}),e.jsx("div",{className:"absolute top-[-18px] left-1/2 transform ",children:e.jsx(_,{className:"text-2xl rotate-180 text-black"})})]}),wt=({editingSection:s,setEditingSection:n})=>{const[d,l]=t.useState(!1),[o,r]=t.useState(!1),[m,i]=t.useState(!1),[v,f]=t.useState(!1);return e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsxs("div",{className:`relative p-3 cursor-pointer border-white ${s=="editQuestions"?"bg-indigo-400 text-white":"bg-white text-black"} rounded-full`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:()=>n("editQuestions"),children:[e.jsx("div",{className:"absolute top-4 left-[30%]",children:e.jsx(D,{isVisible:d,value:"Edit the Information of Current Slide"})}),e.jsx(vt,{className:"text-5xl"})]}),e.jsxs("div",{className:`relative p-3 cursor-pointer border-white ${s=="slideEditing"?"bg-indigo-400 text-white":"bg-white text-black"} rounded-full`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>n("slideEditing"),children:[e.jsx("div",{className:"absolute top-4 left-[30%]",children:e.jsx(D,{isVisible:o,value:"Edit the Layout of Current Slide"})}),e.jsx(nt,{className:"text-5xl"})]}),e.jsxs("div",{className:`relative p-3 cursor-pointer border-white ${s=="addAdmin"?"bg-indigo-400 text-white":"bg-white text-black"} rounded-full`,onClick:()=>n("addAdmin"),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[e.jsx("div",{className:"absolute top-4 left-[30%]",children:e.jsx(D,{isVisible:m,value:"Create Custom Admin for this Presentation"})}),e.jsx(xe,{className:"text-5xl"})]}),e.jsxs("div",{className:`relative p-3 cursor-pointer border-white ${s=="none"?"bg-indigo-400 text-white":"bg-white text-black"} rounded-full`,onClick:()=>n("none"),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.jsx("div",{className:"absolute top-4 left-[30%]",children:e.jsx(D,{isVisible:v,value:"Hide Slide Section"})}),e.jsx(Ze,{className:"text-5xl"})]})]})})},yt=({designTemplate:s,localOptions:n,localQuestion:d})=>e.jsx("section",{className:" h-[85vh] md:h-[550px] flex-1 justify-center transition-all ease-in-out duration-300",children:e.jsx("div",{className:"w-full h-full pl-2 pr-2 flex flex-col mt-6 items-center ",children:e.jsxs("div",{className:`h-[100%] bg-cover bg-center ${s} w-[95%] text-white`,children:[e.jsx("div",{className:"w-full h-[10%] text-black font-Outfit text-2xl pt-7 pl-7",children:e.jsxs("h1",{children:["Q) ",d]})}),e.jsx("div",{className:"w-full flex justify-center  items-center h-[90%]",children:e.jsx("div",{className:"w-[99%] md:w-[85%] flex justify-center items-center  gap-4 h-[70%]",children:n.map((l,o)=>e.jsxs("div",{className:"w-full h-full font-Outfit flex flex-col justify-end items-center",children:[e.jsx("div",{children:e.jsx("p",{className:"text-black",children:l.votes})}),e.jsx("div",{className:"bg-indigo-400 h-[2%] w-[100%] md:w-[80%]",style:{backgroundColor:l.color}}),e.jsx("div",{className:"w-[100%] md:w-[80%] mt-1 text-center text-white text-sm bg-black flex justify-center items-center",children:e.jsx("p",{className:" inline font-Outfit",children:l.text})})]},o))})})]})})}),kt=({designTemplate:s,localOptions:n,localQuestion:d})=>(console.log(s),e.jsx("section",{className:"h-[85vh] w-full md:h-[550px] flex-1 pr-2 pl-2 justify-center transition-all ease-in-out duration-300",children:e.jsx("div",{className:"w-full h-full flex flex-col mt-6 items-center ",children:e.jsxs("div",{className:`h-[98%]  w-full md:w-[95%] bg-cover bg-center ${s}`,children:[e.jsx("div",{className:"w-full min-h-[30%] font-Outfit text-2xl pt-7 pl-12",children:e.jsxs("h1",{children:["Q) ",d]})}),e.jsx("div",{className:"w-full pb-28 flex mt hidden-lg:5 justify-center",children:e.jsx("div",{className:"w-[90%]  font-Outfit flex flex-col justify-start gap-4 ",children:n.map((l,o)=>e.jsxs("div",{className:"w-full  flex gap-1",children:[e.jsxs("div",{className:"w-[3%]",children:[o+1,")"]}),e.jsxs("div",{className:"w-[60%] md:w-[90%] flex gap-2",children:[e.jsx("div",{className:"w-[1%] h-full",style:{backgroundColor:l.color}}),e.jsx("div",{children:l.text})]})]},l._id))})})]})})})),Ct=({designTemplate:s,localOptions:n,localQuestion:d})=>{const o=r=>r.length<=15?r:r.slice(0,15)+"...";return e.jsx("section",{className:"h-[550px] flex-1 justify-center transition-all ease-in-out duration-300",children:e.jsx("div",{className:"w-full h-full pl-2 pr-2  flex flex-col mt-6 items-center ",children:e.jsxs("div",{className:`h-[100%] bg-cover bg-center ${s} w-[100%] text-white`,children:[e.jsx("div",{className:"w-full h-[10%] text-black font-Outfit text-2xl pt-7 pl-7",children:e.jsxs("h1",{children:["Q) ",d]})}),e.jsx("div",{className:"w-full flex justify-center  items-center h-[90%]",children:e.jsx("div",{className:"w-[99%] md:w-[85%] flex justify-center items-center  gap-2 md:gap-4 h-[70%]",children:n.map((r,m)=>e.jsxs("div",{className:"w-full h-full font-Outfit flex flex-col justify-end items-center",children:[e.jsx("div",{children:e.jsx("p",{className:"text-black",children:r.votes})}),e.jsx("div",{className:"bg-indigo-400 h-[2%] w-[100%] md:w-[80%]",style:{backgroundColor:r.color}}),e.jsx("div",{className:"w-[100%] md:w-[80%] min-h-6 mt-1 text-center text-white text-sm bg-black flex justify-center items-center",children:e.jsx("p",{className:" inline  font-Outfit",children:o(r.text)})})]},m))})})]})})})},Ot=({onClose:s,questionId:n,setQuestion:d,setDisplay:l,setDetails:o,setStatus:r,presenetationId:m})=>{const i=Q(),v=async()=>{console.log(n);const f=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/deleteSlide",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:n})}),w=await f.json();f.ok?(d(C=>C.filter(y=>y._id!==n)),s(),i(`/App/AdminPanel/Presentation/${m}`)):(s(),o("Error Occurred!"),l(!0),r(!0),setTimeout(()=>{r(!1)},2e3)),console.log(w)};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/70 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md w-full max-w-sm p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"text-red-400 text-2xl"}),e.jsx("h2",{className:"font-Outfit font-semibold text-lg text-black",children:"Confirm Deletion"})]}),e.jsx("p",{className:"font-Outfit text-gray-700 text-sm mb-6 leading-relaxed",children:"Are you sure you want to delete this slide? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"px-3 font-Outfit cursor-pointer py-1.5 text-sm font-medium rounded-md border bg-red-500 text-white hover:bg-red-600 transition",children:"Cancel"}),e.jsx("button",{onClick:v,className:"px-3 font-Outfit cursor-pointer py-1.5 text-sm font-medium rounded-md bg-indigo-400 text-white hover:bg-indigo-500 transition",children:"Delete"})]})]})})},St=({designTemplate:s,localOptions:n,localQuestion:d})=>{const l=t.useRef(null),o=t.useRef(null);return t.useEffect(()=>{o.current&&o.current.destroy();const r=l.current.getContext("2d"),m=n.every(i=>i.votes===0);return o.current=new de(r,{type:"pie",data:{labels:n.map(i=>i.text),datasets:[{data:m?n.map(()=>1):n.map(i=>i.votes),backgroundColor:m?n.map(()=>"rgba(0,0,0,0.20)"):n.map(i=>i.color),borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1}},aspectRatio:1}}),()=>{o.current&&o.current.destroy()}},[n]),e.jsx("div",{className:"h-[550px] flex-1 flex flex-col justify-center pl-2 pr-2 transition-all ease-in-out duration-300",children:e.jsx("div",{className:"w-full h-full flex flex-col justify-center mt-6 items-center",children:e.jsxs("div",{className:`w-full h-full bg-cover bg-center bg-no-repeat ${s}`,children:[e.jsx("div",{className:"w-full h-[10%] text-black font-Outfit text-2xl pt-7 pl-7",children:e.jsxs("h1",{children:["Q) ",d]})}),e.jsxs("div",{className:"w-full h-[90%] flex flex-col md:flex-row justify-center items-center gap-10 p-6",children:[e.jsx("div",{className:"w-[90%] md:w-[300px] h-[300px]",children:e.jsx("canvas",{ref:l})}),e.jsx("div",{className:"grid grid-cols-2 grid-rows-2 md:flex md: md:flex-row gap-4 md:gap-6 items-start md:items-center",children:n.map(r=>e.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full",style:{backgroundColor:r.color}}),e.jsx("p",{className:"text-lg font-Outfit font-medium text-gray-800",children:r.text})]},r._id))})]})]})})})},Tt=({designTemplate:s,localOptions:n,localQuestion:d})=>{const l=t.useRef(null),o=t.useRef(null);return t.useEffect(()=>{o.current&&o.current.destroy();const r=l.current.getContext("2d"),m=n.every(i=>i.votes===0);return o.current=new de(r,{type:"doughnut",data:{labels:n.map(i=>i.text),datasets:[{data:m?n.map(()=>1):n.map(i=>i.votes),backgroundColor:m?n.map(()=>"rgba(0,0,0,0.20)"):n.map(i=>i.color),borderWidth:1}]},options:{cutout:"50%",responsive:!0,plugins:{legend:{display:!1}}}}),()=>{o.current&&o.current.destroy()}},[n]),e.jsx("div",{className:"h-[550px] flex-1 pr-2 pl-2 flex flex-col justify-center transition-all ease-in-out duration-300",children:e.jsx("div",{className:"w-full h-full mt-6 flex flex-col justify-center items-center",children:e.jsxs("div",{className:`w-full h-full bg-cover bg-center bg-no-repeat ${s}`,children:[e.jsx("div",{className:"w-full h-[10%] text-black font-Outfit text-2xl pt-7 pl-7",children:e.jsxs("h1",{children:["Q) ",d]})}),e.jsxs("div",{className:"w-full h-[90%] flex flex-col md:flex-row justify-center items-center gap-10 p-6",children:[e.jsx("div",{className:"w-[80%] sm:w-[60%] md:w-[300px] h-[70%] sm:h-[250px] md:h-[300px]",children:e.jsx("canvas",{ref:l})}),e.jsx("div",{className:"grid grid-cols-2 grid-rows-2 md:flex md: md:flex-row gap-4 sm:gap-6 items-start sm:items-center  sm:mt-0",children:n.map(r=>e.jsxs("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[e.jsx("span",{className:"w-6 h-6 rounded-full",style:{backgroundColor:r.color}}),e.jsx("p",{className:"text-lg font-Outfit font-medium text-gray-800",children:r.text})]},r._id))})]})]})})})},zt=({currentQuestion:s,allQuestion:n,presentation:d,questionId:l,setAllQuestion:o})=>{const r=Q(),[m,i]=t.useState("none"),[v,f]=t.useState(!1),[w,C]=t.useState(s.question||[]),[y,N]=t.useState(s.options||[]),[b,g]=t.useState(d.title||""),[O,S]=t.useState(s.designTemplate),[T,G]=t.useState(s.designType||""),[z,B]=t.useState(d._id),[A,E]=t.useState(!1),[q,L]=t.useState(""),[M,j]=t.useState(!1),[F,k]=t.useState(""),[x,c]=t.useState(!1),[p,R]=t.useState(d.addedAdmin||[]),[J,X]=t.useState(!1),[be,K]=t.useState(s.Image||""),[Ne,ee]=t.useState(s.description||""),[ve,we]=t.useState(n.length||0),[ye,ke]=t.useState(1);let P=t.useRef(null);t.useEffect(()=>{C(s.question||""),N(s.options||[]),B(d._id||""),L(s._id||""),S(s.designTemplate||""),G(s.designType||""),R(d.addedAdmin||[]),K(s.Image||""),ee(s.description||""),g(d.title||""),we(n.length||0),ke(s.order||1)},[s,q,d]);const Ce=()=>{switch(T){case"poll":return e.jsx(yt,{localOptions:y,localQuestion:w,designTemplate:O});case"ranking":return e.jsx(kt,{localOptions:y,localQuestion:w,designTemplate:O});case"quiz":return e.jsx(Ct,{localOptions:y,localQuestion:w,designTemplate:O});case"pie":return e.jsx(St,{localOptions:y,localQuestion:w,designTemplate:O});case"donut":return e.jsx(Tt,{localOptions:y,localQuestion:w,designTemplate:O})}},H=t.useRef(null),Oe=(a,u)=>{N(h=>h.map(($,Z)=>Z===a?{...$,color:u}:$)),H.current&&clearTimeout(H.current),H.current=setTimeout(async()=>{try{const h=await fetch(`https://quizidy-backend.duckdns.org/handleQuestions/questions/${l}/options/${a}/color`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({color:u})}),$=await h.json();h.ok?(N($.options),console.log("success")):console.error($.Message)}catch(h){console.error("Error updating color:",h)}},2e3)},te=t.useRef(null),V=t.useRef(y),Se=(a,u)=>{const h=y.map(($,Z)=>Z===a?{...$,text:u}:$);N(h),V.current=h,clearTimeout(te.current),te.current=setTimeout(async()=>{try{(await fetch(`https://quizidy-backend.duckdns.org/handleQuestions/questions/${l}/options`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({options:V.current})})).ok&&console.log("✅ Saved:",V.current)}catch($){console.error("❌ Failed to save:",$)}},2e3)},U=t.useRef(null);function Te(a){C(a),U.current&&clearTimeout(U.current),U.current=setTimeout(async()=>{try{const u=await fetch(`https://quizidy-backend.duckdns.org/handleQuestions/questions/${l}/editQuestion`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:a})}),h=await u.json();u.ok?(C(h.question),console.log("Successfull!")):console.log("Error")}catch(u){console.log("error : ",u)}},2e3)}const W=t.useRef(null),ze=a=>{g(a),W.current&&clearTimeout(W.current),W.current=setTimeout(async()=>{try{const u=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/presentation/editTitle",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationId:z,presentationName:a})}),h=await u.json();u.ok?(j(!0),k("Successfully Changed!"),c(!0)):(j(!0),k(h?.message),c(!1))}catch(u){console.log("Error : ",u)}},2e3)},se=75,ne=a=>a.length>se?a.slice(0,se)+"...":a,le=async a=>{L(a),f(!1),r(`/App/AdminPanel/Presentation/${z}/${a}`)},ie=a=>{switch(a){case"poll":return e.jsx(me,{className:"text-blue-400",size:16});case"ranking":return e.jsx(he,{color:"indigo",size:14});case"quiz":return e.jsx(pe,{className:"text-red-400",size:16});case"pie":return e.jsx(ge,{className:"text-orange-400",size:16});case"donut":return e.jsx(et,{className:"text-orange-400 text-lg"})}},[Ae,Pe]=t.useState(null),$e=async a=>{const u=await fetch(`https://quizidy-backend.duckdns.org/handleQuestions/question/${l}/deleteOption`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optionId:a})}),h=await u.json();u.ok?(j(!0),k("Successfully Deleted!"),c(!0),N(h.question.options||[]),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{j(!1)},[2e3])):(j(!0),c(!1),k(h.message),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{j(!1)},[2e3]))},Be=async()=>{const a=await fetch(`https://quizidy-backend.duckdns.org/handleQuestions/question/${l}/addOption`,{method:"POST",headers:{"Content-Type":"application/json"}}),u=await a.json();a.ok?(N(u.question.options),j(!0),c(!0),k("Successfully Added"),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{j(!1)},[2e3])):(j(!0),c(!1),k(u.message),P.current&&clearTimeout(P.current),setTimeout(()=>{j(!1)},[2e3]))},Y=t.useRef(null),Ee=a=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout(async()=>{const u=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/editDesignTemplate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDesignTemplate:a,questionId:l})}),h=await u.json();u.ok&&S(h.question.designTemplate)},2e3)},Ge=async a=>{if(!a)return;const u=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/AddAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userGmail:a,presentationId:z})}),h=await u.json();u.ok?(R(h.presentation.addedAdmin),k(h.message),c(!0),j(!0),setTimeout(()=>{j(!1)},2e3)):(k(h.message),c(!1),j(!0),setTimeout(()=>{j(!1)},3e3))},qe=async a=>{const u=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/DeleteAddedAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,presentationId:z})}),h=await u.json();console.log(h),u.ok?(R(h.presentation.addedAdmin),k(h.message),c(!0),j(!0),setTimeout(()=>{j(!1)},2e3)):(k(h.message),c(!1),j(!0),setTimeout(()=>{j(!1)},3e3))},Le=()=>{switch(m){case"editQuestions":return e.jsx(gt,{setSelectedCorrect:Pe,selectedCorrect:Ae,localQuestion:w,localOptions:y,handleColorChange:Oe,handleOptionChange:Se,updateQuestion:Te,deleteOption:$e,addOption:Be,designType:T,questionId:l,previewUrl:be,setPreviewUrl:K,setStatus:c,setDetails:k,setShowPopUp:j,Description:Ne,setDescription:ee,setLocalOptions:N});case"slideEditing":return e.jsx(jt,{updatePresentationName:ze,presentationName:b,deletePopUp:()=>X(!0),designTemplate:O,changeDesignTemplate:Ee});case"addAdmin":return e.jsx(bt,{AddAdminFun:Ge,listOfAdmin:p,deleteAddedAdmin:qe});default:return e.jsx("div",{})}};return e.jsxs("div",{className:"relative h-screen",children:[e.jsxs("div",{className:"bg-gray-200 relative h-[530px] w-screen  overflow-hidden overflow-y-hidden",children:[e.jsxs("div",{className:"absolute top-5 cursor-pointer left-4  bg-black pt-1 pb-1 pr-4 pl-4  rounded-3xl flex lg:hidden justify-center items-center gap-2",onClick:()=>{f(!v),E(!1)},children:[e.jsx(We,{className:"text-white flex lg:hidden"}),e.jsxs("p",{className:"text-white font-Outfit",children:[ye,"/",ve]})]}),e.jsxs("div",{className:`fixed top-0 left-0 h-full z-[999] pt-6 bg-white transition-all duration-500 ease-in-out transform ${v?"translate-x-0 opacity-100 pointer-events-auto":"-translate-x-full opacity-0 pointer-events-none"} flex justify-center w-[60%] sm:w[30%] md:w-[20%]`,children:[e.jsx("div",{className:"fixed md z-[99999] left-[105%] s border p-2 bg-black rounded-full ",onClick:()=>f(!v),children:e.jsx(Ye,{className:" cursor-pointer text-white text-sm"})}),e.jsxs("div",{className:"flex  pr-5 pl-2 flex-col gap-4 items-center w-full",children:[e.jsxs("button",{onClick:()=>{E(!A),f(!v)},className:"flex justify-center text-[13px] gap-1 pt-2 pb-2 pr-6 pl-6 bg-stone-900 text-white items-center font-Outfit rounded-2xl",children:[e.jsx(ae,{}),e.jsx("p",{children:"New Slide"})]}),e.jsx("div",{className:"h-screen flex flex-col gap-2 w-full overflow-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map((a,u)=>e.jsxs("div",{onClick:()=>le(a._id),className:"w-full h-20 flex justify-center gap-1 cursor-pointer",children:[e.jsx("p",{className:"font-Outfit text-xs pt-2",children:u+1}),e.jsxs("div",{className:`w-full h-20 border-2 flex justify-center flex-col items-center ${q===a._id?"border-indigo-300":"border-gray-200"} rounded-xl bg-center ${a.designTemplate} bg-cover gap-1`,children:[ie(a.designType),e.jsx("h1",{className:"text-[7px] text-center font-Outfit",children:ne(a.question)})]})]},a._id))})]})]}),e.jsxs("div",{className:"flex w-full h-full justify-center ",children:[e.jsx("section",{className:" w-0 lg:w-[12%]  pt-6 hidden lg:flex justify-center",children:e.jsxs("div",{className:"flex  flex-col gap-4 items-center w-full",children:[e.jsxs("button",{onClick:()=>E(!A),className:"flex justify-center text-[13px] gap-1 pt-2 pb-2 pr-6 pl-6 bg-stone-900 text-white items-center font-Outfit rounded-2xl cursor-pointer",children:[e.jsx(ae,{}),"New Slide"]}),e.jsx("div",{className:" flex flex-col gap-2 w-full overflow-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map((a,u)=>e.jsxs("div",{onClick:()=>le(a._id),className:"w-full h-20 flex justify-center gap-1 cursor-pointer",children:[e.jsx("p",{className:"font-Outfit w-[7%] flex justify-center  text-xs pt-2",children:u+1}),e.jsxs("div",{className:`w-[93%] h-20 border-2 flex justify-center flex-col items-center ${q===a._id?"border-indigo-300":"border-gray-200"} rounded-xl bg-center ${a.designTemplate} bg-cover gap-1`,children:[ie(a.designType),e.jsx("h1",{className:"text-[8px] text-center font-Outfit",children:ne(a.question)})]})]},a._id))})]})}),Ce(),Le()]})]}),e.jsx("div",{className:`absolute top-[70px] left-3 justify-center items-center transition-all duration-500 ease-out
                    ${A?"pointer-events-auto":"pointer-events-none"}
  `,children:e.jsx(Nt,{isVisible:A,onClose:()=>E(!1),presentationId:z})}),e.jsx("div",{className:`absolute bottom-[15%] transition-all duration-500 ease-in-out  w-screen z-[100] flex ${M?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none opacity-0 translate-y-3"} justify-center items-center`,children:e.jsx(je,{status:x,details:F})}),e.jsx("div",{className:"absolute w-screen left-0 bottom-[5%]",children:e.jsx(wt,{editingSection:m,setEditingSection:i})}),e.jsx("div",{className:`absolute transition-all duration-300 ease-in-out ${J?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}  w-screen h-screen top-0 left-0`,children:e.jsx(Ot,{presenetationId:z,setDetails:k,setStatus:c,setDisplay:j,setQuestion:o,questionId:l,onClose:()=>X(!1)})})]})},At=({question:s,onClose:n})=>{const[d,l]=t.useState(s.options||[]),[o,r]=t.useState(s.designTemplate||"");return t.useEffect(()=>{l(s.options||[]),r(s.designTemplate||"")},[s]),e.jsxs("div",{className:`w-[90%] relative h-[90%] bg-center bg-no-repeat bg-cover flex flex-col justify-center items-center gap-10 ${o}`,children:[e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("img",{src:it,className:"w-48",alt:""})}),e.jsxs("div",{className:"w-full flex flex-col gap-10 justify-center items-center",children:[e.jsxs("div",{className:"w-full md:w-[80%] flex justify-center font-Outfit text-2xl",children:["Q)",s.question]}),e.jsx("div",{className:"w-[80%] sm:w-[40%] flex flex-col gap-3 justify-center items-center",children:d.map((m,i)=>e.jsx("div",{className:"w-full md:w-[80%] cursor-pointer hover:scale-105 transition-all ease-in-out text-white pl-6 flex items-center font-Outfit text-lg h-16 bg-black border border-black rounded-2xl",children:m.text},i))})]}),e.jsx("div",{className:"absolute bottom-0 right-0 font-Outfit text-white bg-black pl-1 pt-1 pb-1",children:e.jsx("p",{children:"This is preview of the page where user interact, this might differ from real."})}),e.jsx("div",{onClick:n,className:"absolute top-4 right-4 bg-red-500 cursor-pointer p-2 text-white rounded-full",children:e.jsx(fe,{})})]})},Zt=()=>{const{presentationId:s,questionId:n}=Me(),{userId:d}=Re(),[l,o]=t.useState(!1),[r,m]=t.useState(""),[i,v]=t.useState(!1),[f,w]=t.useState([]),[C,y]=t.useState([]),[N,b]=t.useState([]),[g,O]=t.useState(!1),[S,T]=t.useState(!1),G=Q(),[z,B]=t.useState(!1),[A,E]=t.useState(!1),[q,L]=t.useState(!0),[M,j]=t.useState(!0),F=async(k,x)=>{try{j(!0);const c=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/searchQuestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationId:k,userId:d})}),p=await c.json();if(!c.ok){L(!1);return}if(b(p.presentation),w(p.question),console.log(p.question),x){const R=p.question.find(J=>J._id===x);y(R||null)}else y(p.question[0]||null),G(`/App/AdminPanel/Presentation/${k}/${p.question[0]._id}`);j(!1)}catch(c){console.error("Error in findDetails:",c)}};return t.useEffect(()=>{F(s,n)},[s,n]),M?e.jsx("div",{className:"w-screen h-screen absolute top-0 left-0  flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 border-4 border-gray-300 border-t-indigo-500 rounded-full animate-spin"}),e.jsx("h1",{className:"font-Outfit text-gray-800",children:"Hang on! Loading Content"})]})}):e.jsxs("main",{className:"w-screen relative h-screen overflow-hidden bg-gray-200",children:[e.jsxs("div",{className:"w-full h-full flex flex-col  items-center",children:[e.jsx("nav",{className:"w-full flex justify-center bg-white items-center h-16",children:e.jsxs("div",{className:"w-[97%] h-full flex justify-between",children:[e.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[e.jsx(Fe,{to:"/App/Admin/Home",className:" pr-2",children:e.jsx(De,{})}),e.jsxs("div",{className:"font-Outfit relative text-[14px]",children:[e.jsx("p",{children:"Presentation"}),e.jsxs("p",{className:"text-[10px] text-stone-600 flex  justify-start items-center",children:[e.jsx(ot,{size:16}),N.title]})]})]}),e.jsx("div",{className:" font-Outfit hidden md:flex justify-center items-center gap-8 text-sm",children:e.jsx("div",{className:"h-full border-b-2 flex justify-center cursor-pointer items-center",children:e.jsx("h1",{className:"pt-1 text-lg",children:"Create"})})}),e.jsxs("div",{className:"flex relative justify-center items-center gap-2",children:[e.jsxs("div",{className:"flex md:hidden",children:[e.jsx("div",{className:"p-1 border border-stone-200 rounded-full bg-gray-200",children:e.jsx(_e,{className:"cursor-pointer",onClick:()=>B(!z)})}),e.jsxs("div",{className:`absolute transition-all ${z?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-2 pointer-events-none"}  bg-white font-Outfit p-5  rounded-xl shadow-sm flex flex-col gap-3 top-12 z-[999999] -left-6 `,children:[e.jsx("div",{onClick:()=>{O(!0),B(!1)},className:"flex justify-center cursor-pointer items-center",children:e.jsx("h1",{className:"pt-1",children:"Preview"})}),e.jsx("div",{onClick:()=>{T(!0),B(!1)},className:"border-b-transparent flex justify-center cursor-pointer items-center",children:e.jsx("h1",{className:"pt-1",children:"Report"})})]})]}),e.jsx("div",{className:"hidden md:flex",children:e.jsx("div",{className:"pt-1 pb-1 pl-4 pr-4 text-white text-sm font-Outfit cursor-pointer flex bg-indigo-400 justify-center items-center rounded-full",onClick:()=>O(!0),children:e.jsxs("p",{className:"flex justify-center items-center gap-1",children:[e.jsx(ct,{size:13})," Preview"]})})}),e.jsx("div",{className:"h-5 w-1 border-r border-r-stone-200"}),e.jsx("div",{className:"hidden md:flex",children:e.jsxs("button",{onClick:()=>T(!0),className:"text-sm cursor-pointer flex justify-center items-center bg-gray-300 text-black font-Outfit rounded-2xl pt-1 pb-1 pr-4 pl-4 gap-1",children:[e.jsx(rt,{size:13}),"Report a Bug"]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>E(!A),className:"text-sm cursor-pointer bg-indigo-400 flex justify-center items-center gap-1 text-white font-Outfit rounded-2xl pt-1 pb-1 pr-4 pl-4",children:[e.jsx(mt,{size:13,color:"white"}),"Go Live"]})})]})]})}),e.jsx(zt,{setAllQuestion:w,questionId:n,presentation:N,allQuestion:f,currentQuestion:C}),e.jsx("div",{className:`absolute top-[70px] left-3 justify-center items-center transition-all duration-500 ease-out
                    ${A?"pointer-events-auto":"pointer-events-none"}
  `,children:e.jsx(ht,{isVisible:A,onClose:()=>E(!1),presentationId:s})})]}),e.jsx("div",{className:`absolute transition-all ease-in-out duration-500 top-0 ${g?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none "} bg-black/60 left-0 w-screen h-screen flex justify-center items-center `,children:e.jsx(At,{question:C,onClose:()=>O(!1)})}),e.jsx("div",{className:`absolute top-0 left-0 w-screen h-screen ${q?"hidden":"flex"}`,children:e.jsx("section",{className:"w-full h-screen flex flex-col items-center justify-center bg-stone-950/90 font-Outfit px-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 flex flex-col items-center gap-6 text-center max-w-md w-full",children:[e.jsx(He,{className:"text-yellow-500 text-6xl"}),e.jsx("h1",{className:"text-2xl font-semibold text-stone-800",children:"Unauthorized Access"}),e.jsx("p",{className:"text-stone-500 text-sm",children:"You do not have permission to access this page or perform this action. Please contact your administrator if you think this is an error."}),e.jsx("button",{onClick:()=>G("/App/Admin/Home"),className:"mt-4 px-6 py-2 cursor-pointer bg-indigo-500 hover:bg-indigo-600 text-white rounded-md transition",children:"Go Back Home"})]})})}),e.jsx("div",{className:`absolute top-0 left-0 w-screen h-screen transition-all ease-in-out duration-300 ${S?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:e.jsx(at,{onClose:()=>T(!1),setDetails:m,setDisplayPopUp:o,setStatus:v})}),e.jsx("div",{className:`absolute top-0 bottom-5 w-screen h-screen ${l?"opacity-100 translate-x-0 pointer-events-auto":"opacity-0 pointer-events-none translate-x-3"}`,children:e.jsx(je,{status:i,details:r})})]})};export{Zt as default};
