import{r as n,u as N,a as v,j as e}from"./index-h_fRO0Hs.js";import{b as S}from"./index-Ay2c9EmZ.js";import{h as I}from"./index-BbFnceN2.js";import"./iconBase-CQKhOVdj.js";const q=()=>{const[a,l]=n.useState(""),[f,d]=n.useState(!1),[p,i]=n.useState(!1),[g,r]=n.useState(!1),[h,c]=n.useState("Hello! How can i assist you today?"),{userName:y,userId:b}=N(),j=v(),w=async o=>{if(o.preventDefault(),a.length<3)return;d(!0);const u=await fetch("https://quizidy-backend.duckdns.org/AIFeatures/sendMessageForAIPoweredQuiz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})});let s=(await u.json()).reply;l(""),typeof s=="string"&&s.includes("```")&&(s=s.replace(/```json|```/g,"").trim());let t;try{t=JSON.parse(s)}catch(x){console.error("JSON parse failed:",x),t={status:"ERROR",reply:"⚠️Something went wrong!"}}if(t?.status=="ERROR"||t?.status=="OK")i(!0),c(t.reply);else if(t.length>0||t?.status==="QUESTION"){console.log("user question"),r(!0);const m=await(await fetch("https://quizidy-backend.duckdns.org/AIFeatures/AddQuestionGeneratedByAI",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questions:t,userId:b,userName:y})})).json();console.log(m),u.ok?(r(!1),j(`/Quiz/AIQuiz/${m.presentationId}`)):(r(!1),i(!0),c("⚠️Something went wrong while creating quiz. Please try again."))}d(!1),console.log(t)};return f?e.jsxs("div",{className:"fixed inset-0 w-screen h-screen bg-white flex flex-col justify-center items-center z-50 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-14 w-14 rounded-full border-4 border-indigo-200"}),e.jsx("div",{className:"h-14 w-14 rounded-full border-4 border-indigo-500 border-t-transparent animate-spin absolute top-0 left-0"})]}),e.jsx("p",{className:"text-gray-600 font-Outfit animate-pulse text-sm",children:"Sending your prompt… Please wait."})]}):p?e.jsx("div",{className:"fixed inset-0 w-screen h-screen bg-stone-950/80 flex items-center justify-center z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-[90%] max-w-md flex flex-col items-center text-center gap-6",children:[e.jsx(I,{className:"text-green-500 text-6xl animate-bounce"}),e.jsx("h1",{className:"text-2xl font-semibold text-stone-800",children:"Reply From Quizify"}),e.jsx("p",{className:"text-stone-600 text-sm leading-relaxed",children:h}),e.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg transition-all duration-200",children:"Understood"})]})}):g?e.jsxs("div",{className:"fixed inset-0 w-screen h-screen bg-white flex flex-col justify-center items-center z-50 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-14 w-14 rounded-full border-4 border-indigo-200"}),e.jsx("div",{className:"h-14 w-14 rounded-full border-4 border-indigo-500 border-t-transparent animate-spin absolute top-0 left-0"})]}),e.jsx("p",{className:"text-gray-600 font-Outfit animate-pulse text-sm",children:"Building up your Quiz. Wait for some time...."})]}):e.jsxs("main",{className:"flex flex-col items-center justify-center h-screen bg-white font-[Outfit] text-gray-800 px-4",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-10",children:[e.jsx("h1",{className:"text-4xl font-semibold bg-gradient-to-r from-indigo-500 to-indigo-700 bg-clip-text text-transparent mb-2",children:"Quizify AI"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Give a prompt and let AI create a quiz and join as a user and answer them all!"})]}),e.jsxs("form",{className:"w-full max-w-2xl flex items-center bg-gray-50 border border-gray-200 rounded-3xl px-4 py-3 shadow-md focus-within:ring-2 focus-within:ring-indigo-300 transition",children:[e.jsx("input",{type:"text",placeholder:"Generate 10 hard level SSC Questions",value:a,onChange:o=>l(o.target.value),className:"flex-1 bg-transparent outline-none px-3 text-gray-700 placeholder-gray-400"}),e.jsx("button",{onClick:w,type:"submit",className:"text-indigo-500 hover:text-indigo-600 ml-3 transition",children:e.jsx(S,{className:"text-xl"})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-6 text-center",children:["Quizify AI can only generate quiz type questions based on your prompts and you can directly answer them.",e.jsx("br",{}),"The AI Generated quiz that you will join and solve will be available in My Presentation Section."]})]})};export{q as default};
