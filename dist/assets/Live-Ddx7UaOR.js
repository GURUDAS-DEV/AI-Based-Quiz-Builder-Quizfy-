import{j as e,N as k,r as s,b as V,u as X}from"./index-h_fRO0Hs.js";import{l as Y}from"./LOGO-AyNIh5tx.js";import{C as W}from"./CommentSection-BwAMzFL3.js";import{t as B,M,l as $}from"./HappyBear-Cat-J2h_.js";import{t as H,w as C}from"./triggerConfetti-TjAggpf-.js";import{X as p}from"./x-ChJIMCMG.js";import{C as z,a as D,I as G}from"./confetti.module-ClXJRI-e.js";import{E as J}from"./expand-l5sHO6nb.js";import"./user-BLS5Bije.js";import"./createLucideIcon-BdoxpPWD.js";const K=()=>e.jsxs("div",{className:"w-screen h-screen fixed flex justify-center items-center transition-all duration-500 ease-out inset-0 bg-black/70 z-50",children:[e.jsx("div",{className:"flex flex-col bg-white w-full max-w-lg shadow-2xl border border-white rounded-3xl p-8 animate-fadeIn items-center",children:e.jsxs("div",{className:"flex flex-col justify-center items-center w-full",children:[e.jsx("div",{className:"pb-5",children:e.jsx("h1",{className:"font-Outfit font-bold text-3xl md:text-4xl bg-gradient-to-r from-indigo-400 via-pink-400 to-purple-700 text-transparent bg-clip-text drop-shadow-lg text-center",children:"Thank You For Using Quizfy!"})}),e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:B,className:"w-40 md:w-48 drop-shadow-xl rounded-full border-4 border-indigo-100",alt:"Thank you"})}),e.jsxs("div",{className:"font-Outfit text-center text-stone-700 text-base md:text-lg px-2",children:[e.jsxs("p",{className:"pt-4 pb-2",children:["Quiz is Ended By the Admin!",e.jsx("br",{}),e.jsx("span",{className:"inline-block",children:"Hope You Enjoyed the Experience"})]}),e.jsxs("p",{className:"text-sm text-stone-500",children:["You can check the your history in the ",e.jsx("span",{className:"font-semibold text-indigo-500",children:"history Session"})," in your Profile."]}),e.jsxs("p",{className:"text-sm text-stone-500 flex justify-center items-center  gap-1",children:["Please ",e.jsx(k,{className:"text-indigo-500 font-bold",to:"/ReviewUs",children:"Review Us"})," and share your experience"]})]}),e.jsx("div",{className:"mt-8 w-full flex justify-center",children:e.jsx(k,{to:"/App/Admin/Home",className:"bg-gradient-to-r font-Montserrat     from-indigo-400 via-pink-400 to-purple-700 text-white px-6 py-2 rounded-full font-semibold shadow-md hover:scale-105 transition-transform duration-200",children:"Go To Home"})})]})}),e.jsx("style",{children:`
                @keyframes fadeIn {
                    0% { opacity: 0; transform: scale(0.95); }
                    100% { opacity: 1; transform: scale(1); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.7s cubic-bezier(0.4,0,0.2,1);
                }
            `})]}),Z=({selectedOption:i,detail:a,onClose:o})=>(s.useEffect(()=>{H()},[]),e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 font-Outfit",children:e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6",children:[e.jsx("button",{onClick:()=>o(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition",children:e.jsx(p,{size:20})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(z,{className:"text-emerald-600",size:72,strokeWidth:2.5})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2",children:"Correct Answer!"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Well done â€” you selected the right option."}),e.jsx("div",{className:"p-4 rounded-lg border border-emerald-200 bg-emerald-50 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-emerald-100",children:e.jsx(z,{size:20,className:"text-emerald-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Correct answer"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:i.text})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6",children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Why this is correct"}),e.jsx("p",{className:"leading-relaxed",children:a||"Nothing Provided by Admin!"})]}),e.jsx("button",{onClick:()=>o(!1),className:"w-full cursor-pointer bg-emerald-600 text-white font-semibold py-3 rounded-lg hover:bg-emerald-700 transition",children:"Continue"})]})})),ee=({onClose:i,selectedOption:a,CorrectOption:o,detail:d})=>{const[m,r]=s.useState(!1);return s.useEffect(()=>{r(!0)},[]),e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes scaleIn {
          0% { transform: scale(0.9); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20% { transform: translateX(-6px); }
          40% { transform: translateX(6px); }
          60% { transform: translateX(-4px); }
          80% { transform: translateX(4px); }
        }
        @keyframes bgRedPulse {
          0%, 100% { background-color: rgba(0,0,0,0.6); }
          50% { background-color: rgba(220,38,38,0.7); }
        }
        .animate-wrong {
          animation: scaleIn 0.3s ease-out,
                     shake 0.5s ease-in-out 0.3s;
        }
        .bg-red-pulse {
          animation: bgRedPulse 1.2s ease-in-out forwards;
        }
      `}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 font-Outfit bg-black/60 bg-red-pulse",children:e.jsxs("div",{className:`relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6 ${m?"animate-wrong":""}`,children:[e.jsx("button",{onClick:()=>i(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition",children:e.jsx(p,{size:20})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(D,{className:"text-red-600",size:72,strokeWidth:2.5})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2",children:"Wrong Answer"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Your selected answer is incorrect."}),e.jsx("div",{className:"p-4 rounded-lg border border-red-200 bg-red-50 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-red-100",children:e.jsx(p,{size:20,className:"text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Your answer"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6",children:[e.jsxs("div",{className:"font-bold text-base text-green-800 mb-1",children:["Correct Option : ",o]}),e.jsx("p",{className:"leading-relaxed",children:d||"Nothing Provided By Admin!"})]}),e.jsx("button",{onClick:()=>i(!1),className:"w-full cursor-pointer bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition",children:"Better Luck, Next time!"})]})})]})},me=()=>{const{presentationId:i}=V(),{userId:a,userName:o}=X(),[d,m]=s.useState([]),[r,g]=s.useState({}),[S,I]=s.useState(""),[x,j]=s.useState(!1),[O,P]=s.useState(!1),[u,E]=s.useState(""),[b,q]=s.useState(""),[w,_]=s.useState(""),N=s.useRef(null),l=s.useRef(null),[v,c]=s.useState(!1),[Q,R]=s.useState(!1),[A,f]=s.useState(!1),[L,h]=s.useState(!1),F=()=>{const t=N.current;t&&t.requestFullscreen?t.requestFullscreen().catch(n=>{console.warn("Fullscreen request failed:",n)}):console.warn("Fullscreen API is not supported in this browser.")},T=()=>{l.current=$("https://quizidy-backend.duckdns.org/adminControlledQuiz",{transports:["websocket","polling"]}),l.current.emit("joinQuizByUser",{presentationId:i,userId:a,userName:o}),l.current.on("newQuestionForUser",({question:t})=>{console.log("New question received:",t),c(!1),g(t),f(!1),h(!1),t.designType=="quiz"&&(E(t.options.find(n=>n.answer===!0)||null),_(t.description))}),l.current.on("alreadyVoted",()=>{c(!0),localStorage.setItem("voted_question",r._id),console.log("You have already voted for this question.")}),l.current.emit("getComments",{presentationId:i}),l.current.on("commentUpdate",({comments:t})=>{console.log("Received comments:",t),m(t||[])}),l.current.on("newComment",t=>{m(n=>[...n,t]),console.log("New comment received:",t)}),l.current.on("quizEnded",()=>{console.log("Quiz has ended."),R(!0),g({}),c(!1),localStorage.removeItem("voted_question")})},y=(t,n)=>{v||!l.current||(r.designType=="quiz"&&(q(n.text),n._id==u._id?f(!0):h(!0)),l.current&&(l.current.emit("submitVote",{presentationId:i,userId:a,userName:o,optionIndex:t}),c(!0),localStorage.setItem("voted_question",r._id)))};s.useEffect(()=>(T(),()=>l.current?.disconnect()),[i]),s.useEffect(()=>{if(I(r.designTemplate||""),r._id){const t=localStorage.getItem("voted_question");t?t===r._id?c(!0):(localStorage.removeItem("voted_question"),c(!1)):c(!1)}},[r]);const U=t=>{l.current.emit("sendComment",{presentationId:i,userId:a,userName:o,message:t})};return e.jsxs("div",{ref:N,className:"relative w-screen min-h-screen flex flex-col justify-between",children:[e.jsxs("div",{className:`w-full flex-1 ${S} flex flex-col justify-center items-center bg-center bg-cover px-4 md:px-8`,children:[e.jsx("div",{className:"w-full flex justify-center mt-4",children:e.jsx("img",{src:Y,className:"w-28 md:w-40 lg:w-48",alt:"Logo"})}),e.jsx("div",{className:"w-full flex flex-col flex-1/2 justify-center items-center",children:v?e.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx("div",{children:e.jsx("img",{src:C,className:"h-23 animate-bounce",alt:"Please wait"})}),e.jsx("div",{className:"w-[60%] text-center flex justify-center items-center mt-6",children:e.jsx("h1",{className:"text-stone-700 text-2xl font-Outfit",children:"Your Response is being Submitted, Please wait for the Presenter to change the Question!"})})]}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"w-full h-full flex flex-col justify-center items-center",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-black w-full flex justify-center items-center font-Outfit text-2xl text-center",children:e.jsx("h1",{className:"w-[80%]",children:r.question||e.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center gap-5",children:[e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("img",{src:C,className:"h-23 animate-bounce",alt:"Please wait"})}),e.jsx("div",{className:"text-stone-700 text-2xl font-Outfit",children:"Waiting for the Presenter to Start the Quiz!"}),e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("p",{className:"text-sm w-[60%] text-gray-700",children:"If Presenter is Live and you are unable to see the question, please refresh the page once or contact us."})})]})})}),e.jsx("div",{className:"w-full flex justify-center items-center mt-6",children:r.Image==null?e.jsx("div",{className:"w-full max-w-2xl flex flex-col justify-center items-center gap-4 px-4 sm:px-8",children:(r.options||[]).map((t,n)=>e.jsx("div",{className:"h-16 w-[80%] cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] bg-stone-900",onClick:()=>y(n,t),children:e.jsx("span",{className:"w-full text-sm sm:text-base md:text-lg",children:t.text})},t._id||n))}):e.jsxs("div",{className:"flex flex-col justify-center gap-6 items-center w-full",children:[e.jsx("div",{className:"h-[300px] w-full flex justify-center items-center",children:e.jsx("img",{src:r.Image,className:"w-full sm:w-auto sm:h-full",alt:""})}),e.jsx("div",{className:"w-full lg:w-[60%] grid grid-cols-1 md:grid-cols-2 place-content-center gap-4",children:(r.options||[]).map((t,n)=>e.jsx("div",{className:"h-16 w-[100%] cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] bg-stone-900",onClick:()=>y(n,t),children:e.jsx("span",{className:"w-full text-sm sm:text-base md:text-lg",children:t.text})},t._id||n))})]})})]})})})})]}),e.jsx("div",{className:"fixed bottom-6 right-[155px] md:bottom-8 md:right-[155px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:F,children:e.jsx(J,{color:"white"})}),e.jsx("div",{className:"fixed bottom-6 right-[96px] md:bottom-8 md:right-[96px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>P(!O),children:e.jsx(G,{color:"white"})}),e.jsx("div",{className:"fixed bottom-6 right-10 md:bottom-8 md:right-10 cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>j(!x),children:e.jsx(M,{color:"white"})}),e.jsx("div",{className:`fixed left-[18%] sm:left-[55%] top-[23%] md:left-[60%] lg:top-[23%] lg:left-[72%] z-50 w-[90%] sm:w-[400px] max-w-[90%] transition-all ease-in-out duration-500 ${x?"opacity-100":"opacity-0 pointer-events-none"}`,children:e.jsx(W,{commentList:d,onClose:()=>j(!1),isVisible:x,sendComment:U})}),L&&e.jsx("div",{className:"absolute top-0 transition-all ease-in-out duration-100 left-0 z-[100]",children:e.jsx(ee,{selectedOption:b,CorrectOption:u.text,detail:w,onClose:h})}),A&&e.jsx("div",{className:"absolute top-0 transition-all ease-in-out duration-100  left-0 z-[100]",children:e.jsx(Z,{selectedOption:b,CorrectOption:u.text,detail:w,onClose:f})}),e.jsx("div",{className:`w-screen h-screen absolute top-0 left-0 z-[90] transition-all ease-in-out duration-500 ${Q?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:e.jsx(K,{})})]})};export{me as default};
