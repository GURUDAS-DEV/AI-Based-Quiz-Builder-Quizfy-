import{u as P,a as k,r as s,j as e}from"./index-h_fRO0Hs.js";import{B as C,N as E,u as T,P as O,A}from"./AccountSettingPOPUP-CLx-OeD-.js";import{e as D}from"./empty-B5aoBBx5.js";import{F as L}from"./index-DB1yuH0Y.js";import{M}from"./index-BbFnceN2.js";import"./index-BUsAA71c.js";import"./iconBase-CQKhOVdj.js";import"./Slogan-BFXXZTf2.js";const Q=()=>{const{userId:g}=P(),j=k(),[c,i]=s.useState(!1),[d,m]=s.useState(!1),[y,f]=s.useState(!1),[r,u]=s.useState([]),[x,o]=s.useState([]),[h,p]=s.useState(!1),[a,N]=s.useState(""),b=async()=>{if(!h){p(!0);try{const t=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/GetPresentations?page=1&limit=10",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:g})}),n=await t.json();t.ok&&(u(n.presentations),o(n.presentations))}catch(t){console.error("Error fetching presentations:",t)}finally{p(!1)}}};s.useEffect(()=>{b()},[]),s.useEffect(()=>{const t=setTimeout(()=>{if(!a.trim())o(r);else{const n=r.filter(l=>l.title?.toLowerCase().includes(a.toLowerCase()));o(n)}},300);return()=>clearTimeout(t)},[a,r]);const v=t=>{j(`/App/AdminPanel/Presentation/${t}`)},w=async t=>{try{(await fetch("https://quizidy-backend.duckdns.org/handleQuestions/DeletePresenation",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationId:t})})).ok&&u(l=>l.filter(S=>S._id!==t))}catch(n){console.error("Error deleting presentation:",n)}};return h?e.jsx("div",{className:"w-full h-screen flex justify-center items-center bg-white",children:e.jsx("div",{className:"w-12 h-12 border-4 border-t-indigo-500 border-gray-300 rounded-full animate-spin"})}):e.jsxs("main",{className:"w-full min-h-screen bg-stone-50 text-gray-800 font-[Outfit] overflow-hidden",children:[e.jsx("div",{className:"w-full flex justify-end mt-7 pr-7 items-center",children:e.jsxs("div",{className:"flex h-full mr-5 items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{onClick:()=>{m(!d),i(!1)},className:"h-8 w-8 rounded-full flex justify-center items-center bg-stone-200 hover:bg-stone-300 cursor-pointer transition",children:e.jsx("img",{src:C,className:"w-3",alt:"Bell"})}),e.jsx(E,{display:d})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-8 w-8 bg-indigo-300 hover:bg-indigo-400 transition cursor-pointer rounded-full flex justify-center items-center",onClick:()=>{i(!c),m(!1)},children:e.jsx("img",{src:T,className:"w-4",alt:"User"})}),e.jsx(O,{display:c,onClose:()=>i(!1),setSettingState:f})]})]})}),e.jsxs("div",{className:"w-full flex flex-col pl-6 pr-6 sm:pl-10 sm:pr-10 pt-10",children:[e.jsx("h1",{className:"text-3xl font-semibold font-Outfit text-gray-800 tracking-tight mb-2",children:"My Presentations"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"All your saved presentations at a glance"}),e.jsx("div",{className:"flex items-center gap-2 mb-8 w-full sm:w-[60%] md:w-[45%]",children:e.jsx("input",{type:"text",className:"h-9 w-full text-sm pl-3 rounded-[7px] font-Outfit bg-stone-200 text-[11px] placeholder-gray-600 outline-none focus:ring-1 focus:ring-indigo-400",placeholder:"Search Presentations",value:a,onChange:t=>N(t.target.value)})}),x.length===0?e.jsxs("div",{className:"font-Outfit h-full flex flex-col gap-3 text-2xl mt-20 w-full justify-center items-center",children:[e.jsx("img",{src:D,alt:"Empty",className:"h-28 opacity-90"}),e.jsx("h1",{className:"inline text-gray-500 text-lg",children:"No Presentations Found"})]}):e.jsx("div",{className:"grid gap-4 sm:gap-5 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 mt-4 pb-10",children:x.map(t=>e.jsxs("div",{className:"group relative border border-stone-200 bg-white/70 backdrop-blur-sm rounded-xl p-4 hover:border-indigo-300 transition-colors duration-200",children:[e.jsxs("div",{className:"cursor-pointer",onClick:()=>v(t._id),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-indigo-100 flex items-center justify-center",children:e.jsx(L,{className:"text-[8px] text-indigo-600"})}),e.jsx("h2",{className:"text-base font-medium text-gray-800 truncate",children:t.title})]}),e.jsxs("div",{className:"flex flex-col text-sm text-gray-500",children:[e.jsx("span",{children:"Created by: Me"}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),e.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 transition",onClick:()=>w(t._id),children:e.jsx(M,{size:18})})]},t._id))})]}),e.jsx("div",{className:`w-screen bg-black/70 absolute transition-all ease-in-out duration-300 top-0 left-0 h-screen flex justify-center items-center ${y?"opacity-100 pointer-events-auto":"pointer-events-none opacity-0 "}`,children:e.jsx(A,{onClose:()=>f(!1)})})]})};export{Q as default};
