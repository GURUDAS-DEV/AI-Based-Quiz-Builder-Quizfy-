import{a as N,u as y,r as s,j as e}from"./index-h_fRO0Hs.js";import{g as w,F as v}from"./index-DB1yuH0Y.js";import{e as S}from"./empty-B5aoBBx5.js";import{B as P,N as C,u as k,P as A,A as E}from"./AccountSettingPOPUP-CLx-OeD-.js";import"./iconBase-CQKhOVdj.js";import"./index-BUsAA71c.js";import"./Slogan-BFXXZTf2.js";const D=()=>{const h=N(),{userId:f}=y(),[r,l]=s.useState([]),[a,p]=s.useState(""),[i,j]=s.useState(""),[c,o]=s.useState(!1),[d,m]=s.useState(!1),[g,x]=s.useState(!1),b=async()=>{try{const t=await fetch("https://quizidy-backend.duckdns.org/handleQuestions/getSharedPresentations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:f})}),n=await t.json();t.ok?l(n.presentations):(l([]),console.error("Failed to fetch shared presentations"))}catch(t){console.error("Error fetching shared presentations:",t)}};s.useEffect(()=>{b()},[]),s.useEffect(()=>{const t=setTimeout(()=>j(a),300);return()=>clearTimeout(t)},[a]);const u=s.useMemo(()=>{if(!i.trim())return r;const t=i.trim().toLowerCase();return r.filter(n=>n.title.toLowerCase().includes(t)||n.owner&&n.owner.toLowerCase().includes(t)||n.description&&n.description.toLowerCase().includes(t))},[i,r]);return e.jsxs("main",{className:"w-full min-h-screen bg-stone-50 font-Outfit",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-7",children:[e.jsx("div",{className:"w-full flex justify-end pr-2 items-center",children:e.jsxs("div",{className:"flex h-full mr-5 items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{onClick:()=>{m(!d),o(!1)},className:"h-8 w-8 rounded-full flex justify-center items-center bg-stone-200 hover:bg-stone-300 cursor-pointer transition",children:e.jsx("img",{src:P,className:"w-3",alt:"Bell"})}),e.jsx(C,{display:d})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-8 w-8 bg-indigo-300 hover:bg-indigo-400 transition cursor-pointer rounded-full flex justify-center items-center",onClick:()=>{o(!c),m(!1)},children:e.jsx("img",{src:k,className:"w-4",alt:"User"})}),e.jsx(A,{display:c,onClose:()=>o(!1),setSettingState:x})]})]})}),e.jsx("header",{className:"flex mt-8 flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-stone-800",children:"Shared Presentations"}),e.jsx("p",{className:"text-sm text-stone-400 mt-1",children:"Presentations shared with you by others."})]})}),e.jsx("div",{className:"flex items-center gap-3 mb-8",children:e.jsxs("div",{className:"flex items-center w-full md:w-1/2 bg-white border border-stone-200 rounded-lg px-3 py-2",children:[e.jsx(w,{className:"text-stone-400 mr-3 text-sm"}),e.jsx("input",{type:"text",value:a,onChange:t=>p(t.target.value),placeholder:"Search shared presentations...",className:"w-full outline-none text-sm text-stone-400 bg-transparent focus:text-black focus:border-black","aria-label":"Search shared presentations"})]})}),u.length===0?e.jsxs("div",{className:"bg-white border border-stone-200 rounded-xl p-10 flex flex-col items-center justify-center",children:[e.jsx("img",{src:S,alt:"empty",className:"h-28 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-stone-700",children:"Nothing shared yet"}),e.jsx("p",{className:"text-sm text-stone-400 mt-2",children:"Presentations shared with you will appear here."})]}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:u.map(t=>e.jsx("article",{className:"bg-white border border-stone-200 rounded-xl p-4 flex flex-col justify-between hover:border-indigo-200 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4 cursor-pointer",onClick:()=>h(`/App/AdminPanel/Presentation/${t._id}`),children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-50 border border-indigo-100 rounded-md",children:e.jsx(v,{className:"text-indigo-500 text-xs"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-stone-800",children:t.title}),e.jsxs("p",{className:"text-xs text-stone-400",children:["Shared by ",t.owner," â€¢ ",new Date(t.createdAt).toLocaleDateString()]}),t.description&&e.jsx("p",{className:"text-sm text-stone-500 mt-1 line-clamp-2",children:t.description})]})]})},t._id))})]}),e.jsx("div",{className:`w-screen bg-black/70 absolute transition-all ease-in-out duration-300 top-0 left-0 h-screen flex justify-center items-center ${g?"opacity-100 pointer-events-auto":"pointer-events-none opacity-0 "}`,children:e.jsx(E,{onClose:()=>x(!1)})})]})};export{D as default};
